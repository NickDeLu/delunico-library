<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="/css/main.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="../static/js/nav.js" th:src="@{/js/nav.js}"></script>
<script src="../static/js/passwordCheck.js" th:src="@{/js/passwordCheck.js}"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<title>Home</title>

</head>
<body>
	<header>
		<img src="/img/elibrary.png">
		<div class ="background"></div>
		<h2 class ="top-left"><a onclick="goBack()">Go Back</a></h2>
		<div sec:authorize="hasAnyRole('USER','MANAGER')" >
			<h2 class = "top-right"><a href="#" th:href="@{/logout}">Logout</a></h2>
		</div>

		<div th:unless="${user}" class = "top-right">
			<h2><a href="#" th:href="@{/login}">Login</a></h2>
			<h2><a href="#" th:href="@{/register}">Sign Up</a></h2>
		</div>
		
	</header>


	<nav class ="topnav" id ="myTopnav">
		<span><a class = "homenav" href ="/"><div>Browse</div></a></span>
		<a href ="/user/myBooks">MyBooks</a>
		<a class ="active" href ="/user/account">Account</a>
		<a sec:authorize="hasRole('ROLE_MANAGER')" href="#" th:href="@{/admin/addPage}">
			Add a Book
		</a>
		<div class ="search-container">
			<form action="/search">
				
				<input type="text" placeholder="Search.." name="search">
				
				<button type="submit"><i class="fa fa-search"></i></button>
			</form>
		</div>
		<a class ="icon"  href="javascript:void(0);" onclick="hamburger()">
			<i class ="fa fa-bars"></i>
		</a>
	</nav>

	<section >
		
		<div class ="flex-container" th:if ="${user}">
		
			<form name="form" action="#" th:action="@{|/updateUser/${user.id}|}" method="post" onsubmit="return checkPasswords()" >
				<h1 id="error"></h1>
				<div th:if="${message}" align="center">
					<h1 th:text="${message}"></h1>
				</div>
				<h1>Username:</h1><input type ="text" name ="username" th:value="${user.username}"/>
				<h1>Email:</h1><input type ="email" name ="email" th:value="${user.email}"/>
				
				<h1>Change Password</h1><p><input type ="password" name ="password" placeholder="Enter New Password"/></p>
				<input type ="password" name ="confirmPassword" placeholder="Confirm New Password"/>
				
				<p><input type="submit" value ="Update Account"></p>
				<!-- <h1>Manage Account</h1> future feature-->
			</form>
		</div>
	</section>

</body>
</html>